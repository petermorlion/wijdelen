@model WijDelen.ObjectSharing.ViewModels.Admin.ObjectRequestAdminViewModel

@{
    var index = 0;

    Layout.Title = T("Requests");
}

@if (Model.ObjectRequestsCount == 0) {
    <span>@T("There are currently no blocked requests")</span>
}
else {
    using (Html.BeginFormAntiForgeryPost()) {
        
        <fieldset class="bulk-actions">
            <div class="manage">
                <label for="filterResults">@T("Filter:")</label>
                @Html.DropDownList("selectedObjectRequestStatusValue", Model.PossibleStatusses.Select(x => new SelectListItem { Value = x.ObjectRequestStatusValue.ToString(), Text = x.Translation }))
                <button type="submit" name="submit.Filter" value="@T("Filter")">@T("Filter")</button>
                <button type="submit" name="submit.Unblock" value="@T("Unblock")">@T("Unblock")</button>
            </div>
        </fieldset>

        <fielset>
            <table class="items">
                <thead>
                <tr>
                    <th></th>
                    <th>@T("Created")</th>
                    <th>@T("Group")</th>
                    <th>@T("Description")</th>
                    <th>@T("Status")</th>
                </tr>
                </thead>
                <tbody>
                @foreach (var record in Model.ObjectRequests) {
                    <tr>
                        <td>
                            <input type="hidden" value="@Model.ObjectRequests[index].AggregateId" name="@Html.NameOf(m => m.ObjectRequests[index].AggregateId)"/>
                            <input type="checkbox" value="true" name="@Html.NameOf(m => m.ObjectRequests[index].IsSelected)"/>
                        </td>
                        <td>@record.CreatedDateTime</td>
                        <td>@record.GroupName</td>
                        <td>@Html.ActionLink(record.Description, "Index", "ObjectRequestDetailsAdmin", new {objectRequestId = record.AggregateId}, new {})</td>
                        <td>@record.Status</td>
                    </tr>

                    index++;
                }
                </tbody>
            </table>
        </fielset>
    }
}

<div class="pager-footer">
    <ul class="pager">
        @if (Model.HasPreviousPage) {
            <li>
                @Html.ActionLink("<", "Index", new {page = Model.Page - 1})
            </li>
        }

        @for (var i = 1; i <= Model.TotalPages; i++) {
            <li>
                @if (Model.Page == i) {
                    <span>@i</span>
                }
                else {
                    @Html.ActionLink(i.ToString(), "Index", new {page = i})
                }
            </li>
        }

        @if (Model.HasNextPage) {
            <li>
                @Html.ActionLink(">", "Index", new {page = Model.Page + 1})
            </li>
        }
    </ul>
</div>